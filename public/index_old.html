<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>基本地图展示</title>
    <link rel="stylesheet" href="https://cache.amap.com/lbs/static/main1119.css"/>
	   <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cache.amap.com/lbs/static/es5.min.js"></script>
    <script src="https://webapi.amap.com/maps?v=1.4.8&key=b38f7391301b4f411589921db716b35a"></script>
    <script src="https://cache.amap.com/lbs/static/addToolbar.js"></script>
	<script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        #container{
          width:100%;
          height:585px;
          border:1px solid #BBBBBB;
          border-top:3px solid #094683;
          margin:100px auto;}
        #table{
          position:absolute;
          left:0px;
          top:0px;
          z-index:-1;}
        #i1{
          position:relative;
          top:700px;
          width:100%;
          z-index: 2;
          text-align:center;
          margin:auto;
        }
        #modalm{
          position:relative;
          width:100%;
          height:100%;
        }
  </style>
</head>
<body>
<table border="8" width=100%>
<tr>
<td></td>
<td>华东理工大学奉贤校区图书馆</td>
</tr>

</table>
<div id="container"></div>

<script>
var map = new AMap.Map('container', {
    resizeEnable: true,
    zoom:200,
    center: [121.5041112900, 30.8310372493]
});
    // 构造点标记
var marker = new AMap.Marker({
    icon: "https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",
    position: [121.5041005611, 30.8309313036]
});
map.add(marker);
map.setFitView(container);
// 构造矢量圆形
/*var circle = new AMap.Circle({
    center: new AMap.LngLat("116.403322", "39.920255"), // 圆心位置
    radius: 1000,  //半径
    strokeColor: "#F33",  //线颜色
    strokeOpacity: 1,  //线透明度
    strokeWeight: 3,  //线粗细度
    fillColor: "#ee2200",  //填充颜色
    fillOpacity: 0.35 //填充透明度
});*/

// 将以上覆盖物添加到地图上
// 单独将点标记添加到地图上

// add方法可以传入一个覆盖物数组，将点标记和矢量圆同时添加到地图上
//map.add([marker,circle]);

function upload() {
    $.ajax({  
            type: "POST",   //提交的方法
            dataType:"text",
            url:"/sitedposts", //提交的地址  
            data:$('#dataform').serialize(),// 序列化表单值  
            async: false,  
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                        alert(XMLHttpRequest.status);
                        alert(XMLHttpRequest.readyState);
                        alert(textStatus);
                    },
            success: function(data) {  //成功
                 alert("success");
            }  
         });
       }  

</script>

<center>
<button id="i1" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">开始演示模态框
</button>
</center>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" id = "modalm">
		<div class="modal-content">
      <form id = "dataform">
      <input name="utf8" type="hidden" value="&#x2713;" />
      <input type="hidden" name="authenticity_token" value="LYCAvJreiZj1yAIVpCuWjHt3OMEJZWLYtbu7yFvDWExIGi9S3dnJwaZhNnY0DVYlgxxa/k2aprhmmnaEirg4AA==" />
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title" id="myModalLabel">模态框（Modal）标题</h4>
        </div>
        <div class="modal-body">
          <div class="field">
            <label for="sitedpost_content">Content</label>
            <textarea name="sitedpost[content]" id="sitedpost_content"></textarea>
          </div>
          <div class="field">
            <label for="sitedpost_date">Date</label>
            <input type="text" name="sitedpost[date]" id="sitedpost_date" />
          </div>
          <div class="field">
            <label for="sitedpost_position">Position</label>
            <input type="text" name="sitedpost[position]" id="sitedpost_position" />
          </div>
			   </div>
			 <div class="modal-footer"><center>
				  <input type="button" id="submitt" class="btn btn-primary" value="提交" onClick="upload()"></center>
			 </div>
			</form>
			
		</div><!-- /.modal-content -->
	</div><!-- /.modal -->
</div>
</body>
</html>